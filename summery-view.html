<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tuva Summary View Redesign</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }
        @media print {
            body * {
                visibility: hidden;
            }
            .print-area, .print-area * {
                visibility: visible;
            }
            .print-area {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
            button, select {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-slate-50 p-6">
    <!-- Controls -->
    <div class="max-w-7xl mx-auto mb-6">
        <div class="bg-white rounded-lg border border-slate-200 p-4 shadow-sm">
            <div class="flex items-center justify-between gap-4 flex-wrap">
                <div class="flex items-center gap-2">
                    <label class="text-sm font-semibold text-slate-700">View Type:</label>
                    <select id="viewType" onchange="changeView()" class="px-3 py-2 text-sm border border-slate-300 rounded-lg focus:outline-none focus:border-teal-600">
                        <option value="no-attributes">No Attributes</option>
                        <option value="categorical-categorical">Categorical × Categorical</option>
                        <option value="categorical-numerical" selected>Categorical × Numerical</option>
                        <option value="numerical-numerical">Numerical × Numerical</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Summary View Container -->
    <div class="max-w-7xl mx-auto print-area">
        <!-- Compact Header Section -->
        <div style="background-color: #F1F5FB;" class="border-b border-slate-300 px-4 py-2">
            <div class="flex items-center justify-between">
                <h3 id="viewTitle" class="text-sm font-semibold text-slate-800">Measures</h3>
                <div id="controls" class="flex items-center gap-2">
                    <!-- Decimal Places Control -->
                    <div class="flex items-center gap-1.5">
                        <label class="text-xs font-medium text-slate-600">Decimals:</label>
                        <div class="flex items-center border border-slate-300 rounded bg-white h-7">
                            <button onclick="changeDecimals(-1)" id="decBtn" class="px-2.5 h-full text-slate-600 hover:bg-slate-100 disabled:opacity-40 disabled:cursor-not-allowed transition-colors border-r border-slate-300">
                                <span class="text-sm font-bold">−</span>
                            </button>
                            <span id="decimalValue" class="px-3 h-full flex items-center text-xs font-semibold text-slate-800 min-w-[28px] justify-center">3</span>
                            <button onclick="changeDecimals(1)" id="incBtn" class="px-2.5 h-full text-slate-600 hover:bg-slate-100 disabled:opacity-40 disabled:cursor-not-allowed transition-colors border-l border-slate-300">
                                <span class="text-sm font-bold">+</span>
                            </button>
                        </div>
                    </div>

                    <!-- Print Button -->
                    <button onclick="window.print()" class="flex items-center gap-1.5 px-3 h-7 bg-white border border-slate-300 text-slate-700 rounded text-xs font-medium hover:bg-slate-50 transition-colors">
                        <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
                        </svg>
                        Print
                    </button>
                </div>
            </div>
        </div>

        <!-- Table Content -->
        <div class="bg-white border-x border-b border-slate-300">
            <!-- No Attributes State -->
            <div id="noAttributes" style="display: none;">
                <div class="p-4">
                    <div class="border-2 border-dashed border-slate-300 rounded p-6 text-center" style="background-color: #F1F5FB;">
                        <p class="text-sm text-slate-600 font-medium">
                            Add a function from the toolbar to activate the summary table
                        </p>
                    </div>
                </div>
            </div>

            <!-- Categorical × Categorical -->
            <div id="categoricalCategorical" style="display: none;">
                <div class="overflow-x-auto">
                    <table class="w-full border-collapse">
                        <thead style="background-color: #F1F5FB;" class="border-b border-slate-300">
                            <tr>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700 border-r border-slate-300"></th>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700 border-r border-slate-300"></th>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700 border-r border-slate-300">tredecassini</th>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700 border-r border-slate-300">tredecim</th>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700">tredecula</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b border-slate-200 hover:bg-slate-50 transition-colors">
                                <td rowspan="2" class="px-4 py-2.5 text-sm font-semibold text-slate-800 border-r border-slate-300" style="background-color: #F9FAFB;">Female</td>
                                <td class="px-4 py-2.5 text-sm font-medium text-slate-700 border-r border-slate-200">Count</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right border-r border-slate-200">40</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right border-r border-slate-200">3</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right">16</td>
                            </tr>
                            <tr class="border-b border-slate-200 hover:bg-slate-50 transition-colors">
                                <td class="px-4 py-2.5 text-sm font-medium text-slate-700 border-r border-slate-200">Overall Percent</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right border-r border-slate-200">38.5%</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right border-r border-slate-200">2.9%</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right">15.4%</td>
                            </tr>
                            <tr class="border-b border-slate-200 hover:bg-slate-50 transition-colors">
                                <td rowspan="2" class="px-4 py-2.5 text-sm font-semibold text-slate-800 border-r border-slate-300" style="background-color: #F9FAFB;">Male</td>
                                <td class="px-4 py-2.5 text-sm font-medium text-slate-700 border-r border-slate-200">Count</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right border-r border-slate-200">14</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right border-r border-slate-200">3</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right">28</td>
                            </tr>
                            <tr class="border-b border-slate-200 hover:bg-slate-50 transition-colors">
                                <td class="px-4 py-2.5 text-sm font-medium text-slate-700 border-r border-slate-200">Overall Percent</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right border-r border-slate-200">13.5%</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right border-r border-slate-200">2.9%</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right">26.9%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Categorical × Numerical -->
            <div id="categoricalNumerical">
                <div class="overflow-x-auto">
                    <table class="w-full border-collapse">
                        <thead style="background-color: #F1F5FB;" class="border-b border-slate-300">
                            <tr>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700 border-r border-slate-300"></th>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700 border-r border-slate-300"></th>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700">Body Weight (grams)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b border-slate-200 hover:bg-slate-50 transition-colors">
                                <td rowspan="2" class="px-4 py-2.5 text-sm font-semibold text-slate-800 border-r border-slate-300" style="background-color: #F9FAFB;">Female</td>
                                <td class="px-4 py-2.5 text-sm font-medium text-slate-700 border-r border-slate-200">Mean</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right">
                                    <span class="numeric-value" data-value="0.206">0.206</span>
                                </td>
                            </tr>
                            <tr class="border-b border-slate-200 hover:bg-slate-50 transition-colors">
                                <td class="px-4 py-2.5 text-sm font-medium text-slate-700 border-r border-slate-200">Std. Deviation</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right">
                                    <span class="numeric-value" data-value="0.052">0.052</span>
                                </td>
                            </tr>
                            <tr class="border-b border-slate-200 hover:bg-slate-50 transition-colors">
                                <td rowspan="2" class="px-4 py-2.5 text-sm font-semibold text-slate-800 border-r border-slate-300" style="background-color: #F9FAFB;">Male</td>
                                <td class="px-4 py-2.5 text-sm font-medium text-slate-700 border-r border-slate-200">Mean</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right">
                                    <span class="numeric-value" data-value="0.145">0.145</span>
                                </td>
                            </tr>
                            <tr class="border-b border-slate-200 hover:bg-slate-50 transition-colors">
                                <td class="px-4 py-2.5 text-sm font-medium text-slate-700 border-r border-slate-200">Std. Deviation</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 text-right">
                                    <span class="numeric-value" data-value="0.039">0.039</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Numerical × Numerical -->
            <div id="numericalNumerical" style="display: none;">
                <div class="overflow-x-auto">
                    <table class="w-full border-collapse">
                        <thead style="background-color: #F1F5FB;" class="border-b border-slate-300">
                            <tr>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700 border-r border-slate-300">Y</th>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700 border-r border-slate-300">Slope</th>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700 border-r border-slate-300">X</th>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700 border-r border-slate-300">Intercept</th>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700 border-r border-slate-300">r</th>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700 border-r border-slate-300">r^2</th>
                                <th class="px-4 py-2.5 text-left text-xs font-semibold text-slate-700">Color</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b border-slate-200 hover:bg-slate-50 transition-colors">
                                <td class="px-4 py-2.5 text-sm font-semibold text-slate-800 border-r border-slate-200">LSL-1</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 border-r border-slate-200">Wing Length (millimeters)</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 border-r border-slate-200">
                                    <span class="numeric-value" data-value="21.603">21.603</span>
                                </td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 border-r border-slate-200">Body Weight (grams)</td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 border-r border-slate-200">
                                    <span class="numeric-value" data-value="24.5">24.500</span>
                                </td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 border-r border-slate-200">
                                    <span class="numeric-value" data-value="0.566">0.566</span>
                                </td>
                                <td class="px-4 py-2.5 text-sm text-slate-800 border-r border-slate-200">
                                    <span class="numeric-value" data-value="0.321">0.321</span>
                                </td>
                                <td class="px-4 py-2.5 text-sm text-slate-800">
                                    <div class="w-10 h-5 rounded" style="background-color: #1E40AF;"></div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        let decimalPlaces = 3;

        const scenarios = {
            'no-attributes': {
                title: 'Add a function from the toolbar to activate the summary table',
                element: 'noAttributes',
                showControls: false
            },
            'categorical-categorical': {
                title: 'Count/Percent',
                element: 'categoricalCategorical',
                showControls: true
            },
            'categorical-numerical': {
                title: 'Measures',
                element: 'categoricalNumerical',
                showControls: true
            },
            'numerical-numerical': {
                title: 'Least Squares Line',
                element: 'numericalNumerical',
                showControls: true
            }
        };

        function changeView() {
            const viewType = document.getElementById('viewType').value;
            const scenario = scenarios[viewType];

            // Hide all views
            Object.values(scenarios).forEach(s => {
                const el = document.getElementById(s.element);
                if (el) el.style.display = 'none';
            });

            // Show selected view
            document.getElementById(scenario.element).style.display = 'block';
            document.getElementById('viewTitle').textContent = scenario.title;
            document.getElementById('controls').style.display = scenario.showControls ? 'flex' : 'none';
        }

        function changeDecimals(delta) {
            decimalPlaces = Math.max(0, Math.min(5, decimalPlaces + delta));
            document.getElementById('decimalValue').textContent = decimalPlaces;
            
            // Update button states
            document.getElementById('decBtn').disabled = decimalPlaces === 0;
            document.getElementById('incBtn').disabled = decimalPlaces === 5;

            // Update all numeric values
            updateNumericValues();
        }

        function updateNumericValues() {
            const numericElements = document.querySelectorAll('.numeric-value');
            numericElements.forEach(el => {
                const value = parseFloat(el.getAttribute('data-value'));
                if (!isNaN(value)) {
                    el.textContent = value.toFixed(decimalPlaces);
                }
            });
        }

        // Initialize
        changeView();
        updateNumericValues();
    </script>
</body>
</html>
